---
title: "Vim: Introducción"
date: 2017-10-29 00:30:00 +0200
categories: [artículos, vim, tutorial, introducción]
description: Breve introducción al editor de textos vim.
permalink: /articulos/vim-intro
---
_Entiendo que si has llegado hasta aquí es porque tienes cierto interés en saber vim y quieres aprender a manejarlo, o que ni tan siquiera sepas lo que es (aunque lo dudo) y hayas abierto este artículo por azar. Sea cual sea el caso, antes de empezar me gustaría que supieras que este artículo lo he enfocado para que puedas hacerte una idea generalizada sobre el editor. Por lo tanto no es esperes encontrar un tutorial al uso o una manual de referencia._

_En la primera parte se explican las características de vim y su diferencia con el resto de editores. En el apartado de instalación y configuración se introducen una serie de comandos útiles para que puedas al menos comenzar a trastear con vim sin que te frustres (créeme que si nadie te dice los 4 comandos básicos te puedes volver loco). Por último sabrás sobre los diferentes modos de edición._

_Sería interesante que pudieras leer esto mientras tienes abierto un terminal donde ir probando vim._

_Si deseas saber más puedes usar como referencia los enlaces al final del artículo._

_¡Bien! Ahora que ya sabes de qué va esto, ponte cómodo y a leer._

## Introducción
Hay muchos editores de texto entre los que elegir. Muchos de ellos llevan mucho tiempo siendo usados y tienen el reconocimiento de la comunidad. Otros son más recientes pero están sido muy bien acogidos. Aunque al final las diferencias entre unos y otros dependen de dos factores: rendimiento y _features_ exclusivas. Aparte de estas dos características, la elección entre será totalmente subjetiva. De hecho, no importa el editor que escogas, la mayoría de las acciones estarán situadas en los mismos lugares. Lo cual facilita el cambio entre ellos. Posiblemente si esto no fuera así nadie cambiaría el editor con el que empezó.

A diferencia de la mayoría de editores está _vim_. Básicamente este programa funciona sobre una consola de comandos (no corre sobre un entorno gráfico). Todas sus acciones se basan en comandos de teclado (ausencia de ratón). Y sus diferentes modos de edición (_normal_, _input_, _visual_) que más adelante verás. Solo estas tres características pueden ahuyentar al profano.

La pregunta que te puedes estar haciendo es ¿por qué usar _vim_ si voy a tener que aprender desde cero para manejarlo? Pues bien, reconozco que al principio cuesta adaptarse a un editor como vim donde nada está donde uno espera. Es más, no hay nada que esté donde uno espera. Para que te hagas una idea de cuán distinto es puedes mirar la imagen a continuación. Observa que interfaz tan minimalista.

{% progressive_picture
  thumbnail: /assets/vim-intro-1.thumb.jpg
  src: /assets/vim-intro-1.jpg
  height: 962
  width: 1490
  alt: 'Interfaz de vim.' %}

Si tras ver una pantalla completamente en negro sigues con ganas de darle un oportunidad, lo primero que deberías saber es que tiene una curva de aprendizaje de semanas (incluso meses) para empezar a tener cierta soltura en su manejo. Una vez haya pasado este tiempo y tras un uso regular encontrarás todo su potencial. Para que te hagas a una idea, comprobarás lo rápido que es tener todas las acciones posibles a un golpe de teclado (_keystroke_) o combinaciones de ellos.

Otros de los beneficios de vim es que puedes usarlo en entornos en remoto a través de conexiones _SSH_ que no ofrecen una interfaz gráfica. Si por algún motivo la conexión fuese lenta, vim encadenaría las acciones tecleadas y las ejecutaría cuando pudiese en el mismo orden sin que se perdieran ¿No es genial esto? De hecho al funcionar sobre un terminal evita un consumo de recursos de sistema mayor, como lo haría cualquier otro editor en un entorno gráfico. Por supuesto, existen variantes de _vim_ que se pueden usar en un entorno gráfico, aunque entonces perdería la gracia.

Si te asusta lo de no poder usar el ratón no debes preocuparte. _vim_ ofrece la posibilidad de habilitarlo añadiendo un parámetro en su configuración. Tras reiniciarlo podrás usar el ratón al igual que en cualquier entorno gráfico. Como comprobarás _vim_ es altamente configurable.

También puedes abrir diferentes pestañas donde poder mantener los archivos abiertos mientras editas otro.

{% progressive_picture
  thumbnail: /assets/vim-intro-2.thumb.jpg
  src: /assets/vim-intro-2.jpg
  height: 318
  width: 748
  alt: 'Pestañas en vim.' %}

Otra característica muy interesante que permite _vim_ es poder dividir la ventana con diferentes archivos.

{% progressive_picture
  thumbnail: /assets/vim-intro-3.thumb.jpg
  src: /assets/vim-intro-3.jpg
  height: 1296
  width: 1920
  alt: 'Ventanas partias en vim.' %}

Por otro lado también incorpora un explorador de carpetas. Algo rudimentario pero funcional al fin y al cabo. Aunque esta opción la acabarás sustituyendo por un plugin como [_NERDTree_][nerdtree]. Una solución mucho más completa que el navegador por defecto.

Otra particularidad de vim es la amplia gama de _plugins_ y librerías adicionales que existen. La mayoría de estas son mantenidas por una comunidad muy activa, garantizando su usabilidad a largo plazo. Si quieres ver algunos ejemplos entra en [_vimawesome.com_][vimawesome].

Como puedes ver, _vim_ es un editor que ofrece las mismas posibilidades sino más que otros. Su gran dificultad es su curva de aprendizaje pero si has llegado hasta aquí imagino que sigues teniendo cierto interés en aprender a manejarlo. Si es así entonces el siguiente paso es instalarlo y configurarlo.

## Instalación y Configuración
_Vim_ se puede instalar de varias maneras diferentes, al igual que cualquier otro programa. Para los usuarios de Windows lo más normal es descargar un archivo instalable y lanzarlo. Para el resto de sistemas basados en UNIX lo más sencillo es utilizar un gestor de paquetes e instalarlo desde ahí. Mac tampoco deja de ser un UNIX aunque no viene con un gestor instalado por defecto (bueno, existe el _App Store_ pero no vale). Para poder instalar las diferentes librerías de manera automática te recomiendo instalar uno. El más extendido hoy día es [_homebrew_][homebrew], echa un vistazo a su página y sigue los pasos para instalarlo.

La otra opción es ir a la [_página oficial de descargas de vim_][vim-downloads] y bajarlo.

Una vez lo hayas instalado abre una consola de comandos o terminal y teclea la siguiente orden.

{% highlight shell %}
$ vim
{% endhighlight %}

Este comando abrirá el programa mostrando la siguiente pantalla.

{% progressive_picture
  thumbnail: /assets/vim-intro-4.thumb.jpg
  src: /assets/vim-intro-4.jpg
  height:880 
  width: 1452
  alt: 'Pantalla de inicio de vim.' %}

Como antes dije, el ratón no funciona aunque se puede activar. Además también habrás comprobado que no puedes escribir. Esto se debe a que vim por defecto arranca con el modo _normal_ activado. Más adelante veremos que es eso de los modos.

Para poder escribir todo lo que tienes que hacer es pulsar la tecla <kbd>i</kbd>. A continuación puedes ver que el cursor ha cambiado y en la parte inferior de la pantalla pegado a la izquierda ha aparecido el texto {% ihighlight shell %}-- INSERT --{% endihighlight %}. Esto indica que ha cambiado de modo y ya puedes escribir como lo harías en un editor común.

Para activar el ratón primero pulsa <kbd>esc</kbd> para regresar al modo normal. Sabrás que estás en el modo normal porque el texto insert inferior habrá desaparecido. Ahora pulsa la tecla <kbd>:</kbd>. Puedes observar que donde apareció el texto {% ihighlight shell %}-- INSERT --{% endihighlight %} muestra ahora dos puntos. Esto indica que puedes escribir los comandos que actuarán sobre el texto. Básicamente el modo _normal_ de _vim_ es cómo trabajar con el texto de un archivo como si fuera un terminal, lanzando acciones que modifican el texto.

A continuación de estos dos puntos introduces el siguiente comando y pulsas <kbd>Enter</kbd>. Tras esto ya podrás usar el ratón.

{% highlight shell %}
:set mouse=a
{% endhighlight %}

El único problema es que cuando cierres _vim_ este parámetro no se mantendrá. Para que este cambio no se pierda y tengas que volver a declararlo debes editar un archivo con el nombre {% ihighlight shell %}.vimrc{% endihighlight %}. En ocasiones en Windows puede que este archivo sea nombrado como{% ihighlight shell %}_vimrc{% endihighlight %}.

Una forma de averiguar este nombre es tecleando {% ihighlight shell %}:version{% endihighlight %}. Esto muestra la versión de _vim_, las _features_ incluidas y el nombre de archivo de configuración entre otras cosas. En la imagen inferior puedes ver el resultado de este comando.
  
{% progressive_picture
  thumbnail: /assets/vim-intro-5.thumb.jpg
  src: /assets/vim-intro-5.jpg
  height: 1022
  width: 1442
  alt: 'Pantalla de inicio de vim.' %}

Para hallar el nombre del archivo de configuración debes buscar el texto _user vimrc file_. Lo más común es que el texto a la derecha de los dos puntos sea {% ihighlight shell %}$HOME/.vimrc{% endihighlight %}. Si no fuese así al menos ya sabrías cómo nombrar archivo de configuración. 

Lo normal es que no exista este archivo así que tendrás que crearlo. Si queremos que todos los cambios sean permanentes en cualquier ruta donde se ejecute vim este archivo se deberá instalar donde apunte la variable de sistema {% ihighlight shell %}$HOME{% endihighlight %}. Un aspecto interesante sobre la configuración de vim es que estas propiedades pueden ser sobreescritas si en el directorio donde se ejecuta el programa existe otro {% ihighlight shell %}.vimrc{% endihighlight %}. Por lo tanto prevalecen los parámetros en este último archivo de configuración.

Dicho esto, desde de _vim_ teclea el siguiente comando.

{% highlight shell %}
:echo $HOME
{% endhighlight %}

El resultado del comando es la ruta donde guardar el archivo {% ihighlight shell %}.vimrc{% endihighlight %} o el nombre que especifique _vim_.

A continuación edita ese archivo con la siguiente orden (siempre desde _vim_).

{% highlight shell %}
:e! $HOME/.vimrc
{% endhighlight %}

Si existe el archivo mostrará una serie de parámetros de configuración en cada nueva línea. En caso contrario estará vacío. Pulsa <kbd>o</kbd> para añadir un línea nueva justo debajo del cursor y cambiar al modo _insert_. Escribe el mismo comando que ejecutaste para habilitar el ratón ({% ihighlight shell %}set mouse=a{% endihighlight %}). Lo siguiente es guardar el archivo mediante la acción {% ihighlight shell %}:wq{% endihighlight %}. <kbd>w</kbd> sirve para guardar el documento y <kbd>q</kbd> para salir. Tras esto podrás usar el ratón en _vim_ como en entorno gráfico. 

A partir de ahora cualquier cambio que desees aplicar de forma permanente en _vim_ deberás escribirlo en este archivo. [Aquí][full-vim-options] puedes ver la lista completa de opciones de configuración. Aunque si lo prefieres puedes usar este otro [enlace][selected-vim-options] mucho más sucinto y explicativo.

## Los modos de _vim_
Vim ofrece la posibilidad de trabajar con el texto de tres maneras diferentes: _normal_, _insert_ y _visual_.

### _Normal_
Este es el modo por defecto nada más abrir vim. Cómo podrás observar si lo tienes abierto no permite la edición del texto, al menos cómo lo harías en cualquier editor. Aunque no es cierto que no se pueda editar. Todos las acciones de edición son ejecutadas a través de un comando asociado a un botón del teclado. Por ejemplo, borrar un carácter se haría con la letra <kbd>x</kbd>.

Muchas de estas acciones pueden ser usadas en combinación con comandos de movimiento y repetición. Un ejemplo sería al pulsar la tecla <kbd>3</kbd> le estaríamos indicando a _vim_ que ejecute la siguiente acción tres veces. Por lo tanto usado en combinación con <kbd>x</kbd> —<kbd>3</kbd><kbd>x</kbd>— se borrarán los tres siguientes caracteres hacia la derecha. 

Otro ejemplo combinatorio sería <kbd>3</kbd><kbd>d</kbd><kbd>l</kbd>. En este caso tendrías el mismo resultado que en el ejemplo anterior. Al igual que <kbd>x</kbd>, <kbd>d</kbd> también se utiliza para borrar pero con la diferencia que espera un comando de movimiento/dirección.

Los comandos de movimiento originales son <kbd>h</kbd><kbd>j</kbd><kbd>k</kbd><kbd>l</kbd>. Esto es así debido a que el creador de [_vi_][vi] (_vim_ es una versión mejorada de _vi_ como especifican sus siglas, Vi IMproved) lo hizo con [terminal ADM-3A][hjkl] a mediados de los 70 y desde entonces se ha mantenido.






[nerdtree]: https://github.com/scrooloose/nerdtree
[vimawesome]: https://vimawesome.com/
[homebrew]: https://brew.sh/
[vim-downloads]: http://www.vim.org/download.php
[full-vim-options]: http://vimdoc.sourceforge.net/htmldoc/quickref.html#option-list
[selected-vim-options]: https://dougblack.io/words/a-good-vimrc.html
[vi]: https://es.wikipedia.org/wiki/Vi
[hjkl]: http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/