<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      First class function
    
  </title>
  <meta name="description" content="En un lenguaje de programación, se dice que cumple con la condición First-class function, si permite tratar las funciones como cualquier otro tipo de objeto.">

  <!-- Fav icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#473333">

  <base href="http://enrq.me/blog">
  <link
    rel="canonical"
    href="http://enrq.me/blog/first-class-function">
  <link
    rel="alternate"
    type="application/rss+xml"
    title="Afilando piedras"
    href="/blog/feed.xml">
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto+Condensed">
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto">
  <link
    rel="stylesheet"
    href="/blog/css/main.css">
  
  
</head>

<body>
<header class="site-header" role="banner">
  <div class="wrapper">
    <div class="site-header__title">
      <h1>
        <a href="/blog/">
          Afilando piedras
        </a>
      </h1>
      <ul class="social">
        <li><a href="/feed.xml"><img src="/assets/feed-icon-14x14.png" title="feed" /></a></li>
      </ul>
    </div>
  </div>
</header>


<main class="page-content" aria-label="Content">
  <div class="wrapper">
    <div class="post">
  <header class="post__header">
    <a class="category-title" href="/categoria/"></a>
    <h1 class="post__header__heading">
      First class function
    </h1>
    <span class="post__header__subheading">
      30 Enero 2018

    </span>
    
<ul class="tags">

  
    <li><a href="/tag/programacion-funcional">programacion-funcional</a></li>
  

  
    <li><a href="/tag/diseno">diseno</a></li>
  

  
    <li><a href="/tag/patrones">patrones</a></li>
  

  
    <li><a href="/tag/terminos-informaticos">terminos-informaticos</a></li>
  

</ul>
  </header>
  
  <p><em>First-class function</em> es la cualidad por la que un lenguaje de programación puede tratar las funciones como si fueran cualquier otro tipo de objeto. Se entiende por objeto cualquier tipo de entidad que pueda asignarse a una variable, almacenarse en un <em>array</em>, transferir como argumento e incluso ser devuelto como resultado de otra función.</p>

<p>La idea en si proviene de otro concepto llamado <em><a href="https://en.wikipedia.org/wiki/First-class_citizen">first-class citizen</a></em>. Este viene a decir que una entidad pueda soportar cualquier tipo de operación común disponible en otras entidades.</p>

<p>En el ejemplo siguiente se muestra una función anónimo siendo asignada a una variable llamada <code class="highlight language-javascript" data-lang="javascript"><span class="nx">sayHello</span></code>. El código mostrado es <em>Javascript</em> pero lo mismo aplica para otros lenguajes que soporten esta característica.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">sayHello</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">"Hello"</span><span class="p">;</span></code></pre></figure>

<p>Si exponemos la variable podremos ver que el contenido es la función previamente definida.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">sayHello</span><span class="p">;</span> <span class="c1">// () =&gt; "Hello"</span></code></pre></figure>

<p>Al añadir los dos paréntesis al final de la variable se ejecuta la función, devolviendo el resultado que acompaña a la cláusula <code class="highlight language-javascript" data-lang="javascript"><span class="k">return</span></code>. En el ejemplo se ha usado una función <em><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Funciones/Arrow_functions">arrow</a></em>, introducida en la versión <em><a href="http://es6-features.org">ES6</a></em> de <em><a href="https://es.wikipedia.org/wiki/ECMAScript">ECMAScript</a></em>. Entre las propiedades de esta nueva especificación permite devolver el resultado sin necesidad de incluir el comando <code class="highlight language-javascript" data-lang="javascript"><span class="k">return</span></code>, tampoco el uso de llaves, cuando la función está contenida en una sola línea.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">sayHello</span><span class="p">();</span> <span class="c1">// "Hello"</span></code></pre></figure>

<p>Puesto que es una variable, también podemos utilizarla como argumento en otras funciones.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">sayHelloWorld</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span>  <span class="o">=&gt;</span>  <span class="nx">fn</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" World"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">sayHelloElia</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">fn</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" Elia"</span><span class="p">;</span>

<span class="nx">sayHelloWorld</span><span class="p">(</span><span class="nx">sayHello</span><span class="p">);</span> <span class="c1">// "Hello World"</span>
<span class="nx">sayHelloElia</span><span class="p">(</span><span class="nx">sayHello</span><span class="p">);</span> <span class="c1">// "Hello Elia"</span></code></pre></figure>

<p>Obviamente el ejemplo anterior está diseñado solamente para mostrar la transferencia de funciones como argumentos. Lo óptimo hubiese sido que <code class="highlight language-javascript" data-lang="javascript"><span class="nx">sayHello</span></code> aceptase un parámetro y concatenase su valor con el cuerpo del resultado.</p>

<p>Otro ejemplo donde también se hace uso de esta característica son los habituales <em>callbacks</em> en <em>Javascript</em>. Estos no dejan de ser funciones anónimas (en la mayoría de los casos) que se utilizan como argumentos. Este encadenamiento de funciones puede llevar a crear capas de abstracción innecesarias.</p>

<p>Seguro que alguna vez te has encontrado algo parecido al siguiente fragmento de código. Siempre son otros los que hacen las cosas mal.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ajax</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/user/1"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">showData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>En la supuesta llamada a un <em>API</em> se describe una función anónima que puede recibir dos argumentos. El primero con los datos esperados y el segundo con el error. Pero en la función contenedora solo contiene un argumento. ¿Qué ocurriría si se produjese un error? Entonces debería modificarse todas las llamadas similares para aceptar este segundo argumento y suministrarlo a la función contenida <code class="highlight language-javascript" data-lang="javascript"><span class="nx">showData</span></code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ajax</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/user/1"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">showData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>Como veis es tontería. Hemos añadido una función que contiene a otra función que recibe el mismo número de argumentos. Por lo tanto, debemos eliminar este tipo de funciones <em>proxy</em> que solo añaden complejidad al código además de retrasar la evaluación del mismo. El resultado correcto sería el siguiente.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ajax</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/user/1"</span><span class="p">,</span> <span class="nx">showData</span><span class="p">);</span></code></pre></figure>

<p>Y así queda mucho más legible, sucinto y elegante.</p>

<p>Otro caso interesante es asignar funciones de distintos objetos en entidades propias de la aplicación. En el ejemplo siguiente puede verse como se crea una entidad <code class="highlight language-javascript" data-lang="javascript"><span class="nx">User</span></code> que asigna por cada propiedad funciones pertenecientes a otros objetos. Esta característica permite crear entidades lógicas de manera fácil y menos verbosa. Al mismo tiempo se reutilizan funciones comunes reduciendo así los puntos donde podría provocarse un error.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">fetch</span><span class="p">:</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getUser</span><span class="p">,</span>
  <span class="na">create</span><span class="p">:</span> <span class="nx">api</span><span class="p">.</span><span class="nx">createUser</span><span class="p">,</span>
  <span class="na">destroy</span><span class="p">:</span> <span class="nx">api</span><span class="p">.</span><span class="nx">destroyUser</span><span class="p">,</span>
  <span class="na">show</span><span class="p">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">show</span>
<span class="p">};</span></code></pre></figure>

<p><em>Et voilà!</em> Con esto deberías haberte hecho una idea de que es una <em>First-class function</em>.</p>

<p>Entre los lenguajes que lo soportan a parte del mencionado <em>Javascript</em> estarían: <em>Haskell</em>, <em>Python</em>, <em>Scala</em>, <em>Perl</em>. En lenguajes imperativos como <em>C</em> y <em>Java</em> esta característica está soportada parcialmente.</p>

<p>Otro asunto que aun no he mencionado y es por el que me he decidido a hacer este artículo (y otros que vendrán), es que la noción de que las funciones puedan ser tratadas como cualquier otro tipo de dato es la base de la programación funcional. Sin este recurso difícilmente podrían darse técnicas como <em>partial-application/currying</em> o <em>closures</em>, fundamentales para la composición de funciones. Un ejemplo podría ser el siguiente <em>snippet</em>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">sayHello</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">"Hello "</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">sayWorld</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">"World"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">sayElia</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s2">"Elia"</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">sayHelloWorld</span> <span class="o">=</span> <span class="nx">compose</span><span class="p">(</span><span class="nx">sayHello</span><span class="p">,</span> <span class="nx">sayWorld</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">sayHelloElia</span> <span class="o">=</span> <span class="nx">compose</span><span class="p">(</span><span class="nx">sayHello</span><span class="p">,</span> <span class="nx">sayElia</span><span class="p">);</span>

<span class="nx">sayHelloWorld</span><span class="p">();</span> <span class="c1">// "Hello World"</span>
<span class="nx">sayHelloElia</span><span class="p">();</span> <span class="c1">// "Hello Elia"</span></code></pre></figure>

<p><code class="highlight language-javascript" data-lang="javascript"><span class="nx">compose</span></code> es un tipo especial de función que puede conseguirse a través de librerías como <em><a href="http://ramdajs.com/docs/#compose">Ramda</a></em> o <em><a href="https://lodash.com/docs/4.17.4#flowRight">Lodash</a></em>. El propósito de esta función es generar nuevas funciones más complejas a partir de otras más sencillas que cumplen un único cometido (principio de responsabilidad única o <em>SRP</em>). Pero esto es otro concepto que veremos en un futuro.</p>

<p>Como puedes apreciar hemos generado dos funciones a partir de otras tres. De no ser por la propiedad <em>First-class function</em> (entre otras cosas como <em>High order function</em>) este tipo de código no sería posible.</p>

<p>¡Y esto es todo por ahora! Más adelante iré compartiendo otros artículos sobre terminología en programación.</p>

<h2 id="fuentes">Fuentes</h2>
<ul>
  <li><a href="https://en.wikipedia.org/wiki/First-class_function">en.wikipedia.org/wiki/First-class_function</a></li>
  <li><a href="https://stackoverflow.com/questions/10141124/any-difference-between-first-class-function-and-high-order-function">stackoverflow.com/questions/10141124/any-difference-between-first-class-function-and-high-order-function</a>
*<a href="http://www.i-programmer.info/programming/theory/5933-what-exactly-is-a-first-class-function-and-why-you-should-care.html">i-programmer.info/programming/theory/5933-what-exactly-is-a-first-class-function-and-why-you-should-care.html</a></li>
  <li><a href="https://appendto.com/2016/10/javascript-functions-as-first-class-objects/">appendto.com/2016/10/javascript-functions-as-first-class-objects/</a></li>
  <li><a href="https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch2.html">drboolean.gitbooks.io/mostly-adequate-guide/content/ch2.html</a></li>
</ul>


</div>

    

  </div>
</main>

<footer class="site-footer">
  <div class="wrapper">
    <p>El contenido de esta página está bajo licencia <a
      href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY 4.0</a>
  </div>
</footer>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
        Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92163525-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>
